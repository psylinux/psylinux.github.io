<!doctype html><html lang=en-us data-bs-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><title>Article :: Debugging with strace - Marcos Azevedo (aka psylinux)</title><meta name=description content><meta name=author content="Marcos Azevedo Blog"><link rel=icon type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css><link rel=stylesheet href=/css/khata.css><link rel=stylesheet href=/css/code-highlight.css><script src=/js/khata.js></script><script src=/js/code-copy.js></script></head><body class="mx-auto text-white d-flex flex-column p-2"><nav aria-label="Primary navigation"><a class="me-2 fs-4" href=/><i class="bi bi-house-door-fill" aria-hidden=true></i>
<span class=visually-hidden>Home</span>
</a><a class="mx-2 fs-4" href=/menu><i class="bi bi-list" aria-hidden=true></i>
<span class=visually-hidden>Menu</span>
</a><a class="ms-2 fs-4" href=/search><i class="bi bi-search" aria-hidden=true></i>
<span class=visually-hidden>Search</span></a><div class="language-switcher d-inline-flex align-items-center gap-2 ms-3" aria-label=Language><span class=fw-semibold>English</span>
<a href=/pt/articles/article_debugging_with_strace/>Português</a></div></nav><main class="flex-grow-1 d-flex flex-column"><article><h1 class=my-4>Article :: Debugging with strace</h1><div class="metadata-panel p-2 mb-3 rounded border"><div class="metadata-value mb-1"><small>Date: <time>2019-01-13</time></small></div><div class="metadata-value mb-1"><small>Reading Time:
4 mins</small></div><div class="metadata-value mb-1"><small>Section:
<a href=/articles title=Section>Articles</a></small></div><div class="metadata-value mb-1"><small>Categories:
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/categories/articles title="categories: articles">articles</a></small></div><div class="metadata-value mb-1"><small>Tags:
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/tags/linux title="tags: linux">linux</a>
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/tags/strace title="tags: strace">strace</a>
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/tags/debug title="tags: debug">debug</a>
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/tags/development title="tags: development">development</a></small></div></div><div class="TableOfContents border rounded p-2 ms-2 mb-2"><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#overview>Overview</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#what-is-strace>What is strace?</a></li><li><a href=#tracing-an-execution>Tracing an Execution</a></li><li><a href=#filtering-system-calls>Filtering System Calls</a></li><li><a href=#attaching-to-running-processes>Attaching to Running Processes</a></li><li><a href=#analyzing-program-statistics>Analyzing Program Statistics</a></li><li><a href=#key-takeaways>Key Takeaways</a></li><li><a href=#practice-exercises>Practice Exercises</a></li><li><a href=#further-reading>Further Reading</a></li></ul></nav></div><h2 id=introduction>Introduction</h2><p>By the end of this article, you&rsquo;ll understand how to use strace to debug programs without access to source code, trace system calls, and troubleshoot execution issues in Linux.</p><h2 id=overview>Overview</h2><p>Debugging without source code can feel like solving a puzzle in the dark. Strace shines a light by showing you exactly what system calls a program makes, from opening files to network connections. Whether you&rsquo;re troubleshooting a crash, investigating suspicious behavior, or just curious about how a program works under the hood, strace is an essential tool in your Linux toolkit.</p><p>Strace monitors the system calls and signals of a specific program, providing the execution sequence from start to end. It&rsquo;s particularly valuable when you don&rsquo;t have source code access and need to understand what a program is actually doing at the system level.</p><h2 id=prerequisites>Prerequisites</h2><p>Before starting, you should have:</p><ul><li>Basic familiarity with the Linux command line</li><li>Understanding of what a process is and how programs execute</li><li>A Linux system with strace installed (most distributions include it by default)</li></ul><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Check if strace is installed</div>Run <code>which strace</code> or <code>strace --version</code> to verify installation. If not installed, use your package manager: <code>sudo apt install strace</code> or <code>sudo yum install strace</code>.</div><h2 id=what-is-strace>What is strace?</h2><p>Strace is a diagnostic and debugging tool that intercepts and records system calls made by a process. It&rsquo;s particularly useful when:</p><ul><li>You don&rsquo;t have access to source code</li><li>A program crashes or behaves unexpectedly</li><li>You need to understand file access patterns</li><li>You&rsquo;re investigating performance bottlenecks</li><li>You want to see what a program is doing &ldquo;under the hood&rdquo;</li></ul><h2 id=tracing-an-execution>Tracing an Execution</h2><p>The simplest way to use strace is to run it with a program:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>strace Binary_File
</span></span></code></pre></td></tr></table></div></div><p>This outputs every system call made by the program to stderr, which can be overwhelming for complex programs.</p><p><strong>Useful options:</strong></p><ul><li><code>-o output.txt</code> - Write output to a file instead of stderr</li><li><code>-t</code> - Show timestamps for each system call</li><li><code>-r</code> - Show relative timestamps (time elapsed between calls)</li></ul><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Managing Large Output</div><p>For complex programs, always use <code>-o</code> to write output to a file:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>strace -o trace.log ./myprogram
</span></span></code></pre></td></tr></table></div></div><p>This makes the output much easier to search and analyze later.</p></div><h2 id=filtering-system-calls>Filtering System Calls</h2><p>Strace&rsquo;s real power comes from filtering. Use the <code>-e</code> option to focus on specific system calls:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>strace -e socket,send,recv nc google.com <span style=color:#ae81ff>80</span>
</span></span></code></pre></td></tr></table></div></div><p>This shows only network-related calls, filtering out hundreds of irrelevant system calls.</p><div class="alert alert-warning my-4" role=alert><div class="fw-bold mb-2">Filter Syntax</div><p>When specifying multiple system calls, <strong>don&rsquo;t add spaces after commas</strong>:</p><ul><li>Correct: <code>-e open,read,write</code></li><li>Wrong: <code>-e open, read, write</code> (will fail)</li></ul></div><p><strong>Common filter categories:</strong></p><ul><li><code>-e trace=file</code> - All file operations (open, read, write, close, stat)</li><li><code>-e trace=process</code> - Process management (fork, exec, wait, exit)</li><li><code>-e trace=network</code> - Network operations (socket, connect, send, recv)</li><li><code>-e trace=signal</code> - Signal handling</li><li><code>-e trace=ipc</code> - Inter-process communication</li></ul><h2 id=attaching-to-running-processes>Attaching to Running Processes</h2><p>You can attach strace to an already running process using its PID:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>strace -p PID
</span></span></code></pre></td></tr></table></div></div><p>This is invaluable for debugging live systems without restarting services.</p><div class="alert alert-warning my-4" role=alert><div class="fw-bold mb-2">Performance Impact</div>Attaching strace to a running process <strong>will slow it down significantly</strong>. The process must context-switch for every system call, and strace adds overhead. Use with caution in production environments.</div><p><strong>Example:</strong> Debug a hanging web server:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Find the PID</span>
</span></span><span style=display:flex><span>ps aux | grep nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Attach strace (may require sudo)</span>
</span></span><span style=display:flex><span>sudo strace -p <span style=color:#ae81ff>1234</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=analyzing-program-statistics>Analyzing Program Statistics</h2><p>The <code>-c</code> flag provides a summary report instead of detailed output, showing:</p><ul><li>Time spent in each system call</li><li>Number of times each call was made</li><li>Errors encountered</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>strace -c binary_file arguments
</span></span></code></pre></td></tr></table></div></div><p>This is perfect for performance analysis and identifying bottlenecks.</p><p><strong>Example output:</strong></p><pre tabindex=0><code>% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 45.12    0.012345          23       537           read
 32.45    0.008876          45       197           write
 12.34    0.003376         112        30           open
</code></pre><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Combine -c with filters</div><p>Use <code>-c</code> with <code>-e</code> to get statistics for specific call types:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>strace -c -e trace<span style=color:#f92672>=</span>file ./myprogram
</span></span></code></pre></td></tr></table></div></div><p>This shows you only file-related system call statistics.</p></div><h2 id=key-takeaways>Key Takeaways</h2><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Quick Summary</div><ul><li><strong>strace</strong> reveals system calls made by programs, essential for debugging without source code</li><li>Use <strong>-e</strong> to filter system calls and reduce noise in the output</li><li>Use <strong>-p PID</strong> to attach to running processes (careful in production!)</li><li>Use <strong>-c</strong> for performance analysis and call statistics</li><li>Write output to files with <strong>-o</strong> for easier analysis</li><li>Understanding system calls helps you see what programs actually do at the OS level</li></ul></div><h2 id=practice-exercises>Practice Exercises</h2><div class="alert alert-danger my-4" role=alert><div class="fw-bold mb-2">Try It Yourself</div><ol><li>Run <code>strace ls /tmp</code> and identify the system calls used to read the directory</li><li>Use <code>strace -e open cat /etc/passwd</code> to see which files <code>cat</code> opens before reading your target file</li><li>Create a simple Python script and use <code>strace -c</code> to analyze which system calls dominate</li><li>Attach strace to a long-running process (like a text editor) and observe its system calls during idle time</li></ol></div><h2 id=further-reading>Further Reading</h2><ul><li><a href=/blog/article_getting_start_with_gdb/>Getting Started with GDB</a> - Learn source-level debugging with GDB</li><li><a href=/blog/article_linux_syscalls_in_assembly/>Linux Syscalls in Assembly</a> - Understand system calls at a deeper level</li><li><a href=https://man7.org/linux/man-pages/man1/strace.1.html>strace man page</a> - Complete reference documentation</li></ul><div class=mt-4><script src=https://giscus.app/client.js data-repo=psylinux/psylinux.github.io data-repo-id=R_kgDORCdA4Q data-category=Comments data-category-id=DIC_kwDORCdA4c4C1fwh data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></article></main><div class=footer><div class="mb-4 d-flex flex-row justify-content-around"><div class=mr-4><i class="text-secondary bi bi-chevron-left" style=font-size:2em></i></div><div class=ms-4><a href=/articles/article_linux_syscalls_in_assembly/ data-toggle=tooltip data-placement=top title="Article :: Using the Linux Syscalls in Assembly"><i class="bi bi-chevron-right" style=font-size:2em></i></a></div></div><footer class="border-top border-light py-2 d-flex flex-row flex-wrap justify-content-between"><div class=copyright><small>psylinux</small></div><div><small>Copyrighted © Marcos Azevedo, 2025.</small></div></footer><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "b1b9cb012238436c9efbac840abc1907"}'></script></div></body></html>