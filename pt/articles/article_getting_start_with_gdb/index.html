<!doctype html><html lang=pt-br data-bs-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><title>Artigo :: Começando com GDB - Marcos Azevedo (aka psylinux)</title><meta name=description content><meta name=author content="Blog do Marcos Azevedo"><link rel=icon type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css><link rel=stylesheet href=/css/khata.css><link rel=stylesheet href=/css/code-highlight.css><script src=/js/khata.js></script><script src=/js/code-copy.js></script></head><body class="mx-auto text-white d-flex flex-column p-2"><nav aria-label="Navegação principal"><a class="me-2 fs-4" href=/pt/><i class="bi bi-house-door-fill" aria-hidden=true></i>
<span class=visually-hidden>Início</span>
</a><a class="mx-2 fs-4" href=/pt/menu><i class="bi bi-list" aria-hidden=true></i>
<span class=visually-hidden>Menu</span>
</a><a class="ms-2 fs-4" href=/pt/search><i class="bi bi-search" aria-hidden=true></i>
<span class=visually-hidden>Buscar</span></a><div class="language-switcher d-inline-flex align-items-center gap-2 ms-3" aria-label=Idioma><a href=/articles/article_getting_start_with_gdb/>English</a>
<span class=fw-semibold>Português</span></div></nav><main class="flex-grow-1 d-flex flex-column"><article><h1 class=my-4>Artigo :: Começando com GDB</h1><div class="metadata-panel p-2 mb-3 rounded border"><div class="metadata-value mb-1"><small>Date: <time>2018-12-16</time></small></div><div class="metadata-value mb-1"><small>Reading Time:
9 mins</small></div><div class="metadata-value mb-1"><small>Section:
<a href=/articles title=Section>Artigos</a></small></div><div class="metadata-value mb-1"><small>Categories:
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/categories/articles title="categories: articles">articles</a></small></div><div class="metadata-value mb-1"><small>Tags:
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/tags/linux title="tags: linux">linux</a>
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/tags/gdb title="tags: gdb">gdb</a>
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/tags/gef title="tags: gef">gef</a>
<a class="px-1 mx-1 rounded border border-secondary bg-taxa" href=/tags/development title="tags: development">development</a></small></div></div><div class="TableOfContents border rounded p-2 ms-2 mb-2"><nav id=TableOfContents><ul><li><a href=#introdução>Introdução</a></li><li><a href=#visão-geral>Visão Geral</a></li><li><a href=#pré-requisitos>Pré-requisitos</a></li><li><a href=#compilando-com-símbolos-de-depuração>Compilando com Símbolos de Depuração</a></li><li><a href=#gerenciando-símbolos-de-depuração>Gerenciando Símbolos de Depuração</a><ul><li><a href=#removendo-símbolos-de-binários>Removendo Símbolos de Binários</a></li><li><a href=#adicionando-símbolos-de-volta>Adicionando Símbolos de Volta</a></li></ul></li><li><a href=#analisando-símbolos-com-nm>Analisando Símbolos com nm</a><ul><li><a href=#tipos-comuns-de-símbolos>Tipos Comuns de Símbolos</a></li><li><a href=#comandos-úteis-do-nm>Comandos Úteis do nm</a></li></ul></li><li><a href=#desmontando-com-objdump>Desmontando com objdump</a></li><li><a href=#referência-de-comandos-do-gdb>Referência de Comandos do GDB</a><ul><li><a href=#iniciando-o-gdb>Iniciando o GDB</a></li><li><a href=#alternando-sintaxe-att-vs-intel>Alternando Sintaxe (AT&amp;T vs Intel)</a></li><li><a href=#desmontando-código>Desmontando Código</a></li><li><a href=#executando-o-programa>Executando o Programa</a></li><li><a href=#listando-código-fonte>Listando Código-Fonte</a></li><li><a href=#inspecionando-estado-do-programa>Inspecionando Estado do Programa</a></li><li><a href=#trabalhando-com-breakpoints>Trabalhando com Breakpoints</a></li><li><a href=#modificando-memória-e-registradores>Modificando Memória e Registradores</a></li><li><a href=#definindo-macros>Definindo Macros</a></li><li><a href=#trabalhando-com-dados>Trabalhando com Dados</a></li><li><a href=#variáveis-de-conveniência>Variáveis de Conveniência</a></li><li><a href=#chamando-funções>Chamando Funções</a></li></ul></li><li><a href=#pontos-chave>Pontos-Chave</a></li><li><a href=#exercícios-práticos>Exercícios Práticos</a></li><li><a href=#leitura-adicional>Leitura Adicional</a></li></ul></nav></div><h2 id=introdução>Introdução</h2><p>Este guia completo cobre tudo o que você precisa para começar a depurar programas C com GDB, desde compilar com símbolos de depuração até inspecionar memória e controlar a execução do programa.</p><h2 id=visão-geral>Visão Geral</h2><p>GDB (GNU Debugger) é o depurador padrão para programas compilados com GCC. Ao contrário de ferramentas como strace que mostram chamadas de sistema, o GDB permite percorrer seu código-fonte linha por linha, inspecionar variáveis, definir breakpoints condicionais e até modificar o comportamento do programa durante a execução.</p><p>Seja rastreando um segfault, entendendo como o código executa, ou fazendo engenharia reversa de um binário, o GDB é uma ferramenta indispensável para qualquer desenvolvedor C/C++ ou pesquisador de segurança.</p><h2 id=pré-requisitos>Pré-requisitos</h2><p>Antes de começar, você deve:</p><ul><li>Ter o GCC instalado e entender compilação básica</li><li>Conhecer fundamentos de programação C (variáveis, funções, ponteiros)</li><li>Estar confortável com a linha de comando do Linux</li><li>Opcionalmente, ler nosso <a href=/blog/cheatsheet_gcc_compiling.pt/>Cheat Sheet de Compilação GCC</a> para o básico de compilação</li></ul><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Melhore Sua Experiência com GDB</div>Após aprender o básico aqui, instale <a href=/blog/howto_install_gdb_gef.pt/>GEF (GDB Enhanced Features)</a> para obter syntax highlighting, exibição automática de contexto e uma interface de depuração muito melhor.</div><h2 id=compilando-com-símbolos-de-depuração>Compilando com Símbolos de Depuração</h2><p>Para depurar efetivamente com GDB, você precisa de símbolos de depuração no seu binário. Esses símbolos mapeiam código de máquina de volta para seu código-fonte (funções, variáveis, números de linha).</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gcc -ggdb source.c -o prog_with_symbols
</span></span></code></pre></td></tr></table></div></div><p>A flag <code>-ggdb</code> produz informações de depuração específicas para GDB com mais detalhes que a flag padrão <code>-g</code>.</p><div class="alert alert-warning my-4" role=alert><div class="fw-bold mb-2">Builds de Debug vs Release</div><p>Sempre compile builds de debug e release separados:</p><ul><li><strong>Build de debug</strong>: <code>gcc -ggdb -O0</code> (sem otimização, símbolos completos)</li><li><strong>Build de release</strong>: <code>gcc -O2</code> (otimizado, remover símbolos antes da distribuição)</li></ul><p>Otimizações podem tornar a depuração confusa pois o compilador reordena e elimina código.</p></div><h2 id=gerenciando-símbolos-de-depuração>Gerenciando Símbolos de Depuração</h2><h3 id=removendo-símbolos-de-binários>Removendo Símbolos de Binários</h3><p>Para deploys em produção, remova símbolos de depuração para reduzir o tamanho do binário:</p><p><strong>Usando strip (remove todos os símbolos):</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>strip --strip-debug --strip-unneeded prog_not_stripped -o prog_stripped
</span></span></code></pre></td></tr></table></div></div><p><strong>Usando objcopy (cria arquivo de debug separado):</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>objcopy --only-keep-debug binary_file debug_file
</span></span></code></pre></td></tr></table></div></div><p>Esta abordagem mantém os símbolos em um arquivo separado, permitindo depurar problemas de produção sem distribuir binários grandes.</p><h3 id=adicionando-símbolos-de-volta>Adicionando Símbolos de Volta</h3><p><strong>Opção 1: Vincular arquivo de debug ao binário</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>objcopy --add-gnu-debuglink<span style=color:#f92672>=</span>debug_file binary_file
</span></span></code></pre></td></tr></table></div></div><p>O GDB automaticamente encontrará e carregará <code>debug_file</code> ao depurar <code>binary_file</code>.</p><p><strong>Opção 2: Carregar arquivo de símbolos manualmente no GDB</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> symbol-file debug_file
</span></span></code></pre></td></tr></table></div></div><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Melhor Prática para Produção</div>Mantenha símbolos de depuração em um arquivo separado e armazene-os com segurança. Ao depurar crashes de produção, você pode carregar o arquivo de debug correspondente sem recompilar.</div><hr><h2 id=analisando-símbolos-com-nm>Analisando Símbolos com nm</h2><p>O comando <code>nm</code> lista símbolos em arquivos objeto e binários, útil para entender quais funções e variáveis existem em um programa.</p><p><strong>Convenções de capitalização de símbolos:</strong></p><ul><li><strong>Minúsculas</strong> = símbolos locais (escopo de arquivo)</li><li><strong>Maiúsculas</strong> = símbolos externos (escopo global)</li></ul><h3 id=tipos-comuns-de-símbolos>Tipos Comuns de Símbolos</h3><table><thead><tr><th style=text-align:left>Símbolo</th><th style=text-align:left>Significado</th></tr></thead><tbody><tr><td style=text-align:left>T</td><td style=text-align:left>Na Seção de Texto (código)</td></tr><tr><td style=text-align:left>D</td><td style=text-align:left>Na Seção de Dados Inicializados</td></tr><tr><td style=text-align:left>B</td><td style=text-align:left>Na Seção de Dados Não-Inicializados (BSS)</td></tr><tr><td style=text-align:left>U</td><td style=text-align:left>Indefinido (referência externa)</td></tr><tr><td style=text-align:left>A</td><td style=text-align:left>Símbolo absoluto</td></tr><tr><td style=text-align:left>N</td><td style=text-align:left>Símbolo de depuração</td></tr></tbody></table><div class="alert alert-info my-4" role=alert><div class="fw-bold mb-2">Mais Tipos de Símbolos</div>Execute <code>man nm</code> para ver todos os tipos de símbolos. Estes são os mais comuns que você encontrará.</div><h3 id=comandos-úteis-do-nm>Comandos Úteis do nm</h3><p><strong>Procurar por um símbolo específico:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nm -A Binary_File | grep function_name
</span></span></code></pre></td></tr></table></div></div><p><strong>Exibir símbolos ordenados por endereço:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nm -n Binary_File
</span></span></code></pre></td></tr></table></div></div><p><strong>Mostrar apenas símbolos externos (globais):</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nm -g Binary_File
</span></span></code></pre></td></tr></table></div></div><p><strong>Mostrar todos os símbolos incluindo símbolos de depuração:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nm -a Binary_File
</span></span></code></pre></td></tr></table></div></div><p><strong>Listar apenas símbolos na seção TEXT (código executável):</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nm -a Binary_File | grep <span style=color:#e6db74>&#39; T &#39;</span>  <span style=color:#75715e># Espaços ao redor do T são importantes</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=desmontando-com-objdump>Desmontando com objdump</h2><p>O comando <code>objdump</code> desmonta binários, mostrando o código assembly real:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>objdump -M intel -D a.out | grep -A20 main.:
</span></span></code></pre></td></tr></table></div></div><p>Isso mostra 20 linhas de assembly começando da função <code>main</code> usando sintaxe Intel.</p><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Opções do objdump Explicadas</div><ul><li><code>-M intel</code>: Usa sintaxe Intel (mais legível que AT&amp;T padrão)</li><li><code>-D</code>: Desmonta todas as seções (não apenas código)</li><li><code>-d</code>: Desmonta apenas seções de código</li><li><code>-S</code>: Intercala código-fonte com assembly (requer símbolos de debug)</li></ul></div><hr><h2 id=referência-de-comandos-do-gdb>Referência de Comandos do GDB</h2><h3 id=iniciando-o-gdb>Iniciando o GDB</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gdb ./program           <span style=color:#75715e># Carregar programa</span>
</span></span><span style=display:flex><span>gdb --args ./program arg1 arg2   <span style=color:#75715e># Carregar com argumentos</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=alternando-sintaxe-att-vs-intel>Alternando Sintaxe (AT&amp;T vs Intel)</h3><p>Por padrão, o GDB usa sintaxe assembly AT&amp;T. A sintaxe Intel é frequentemente mais legível:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set disassembly-flavor intel
</span></span></code></pre></td></tr></table></div></div><p>Adicione isso ao <code>~/.gdbinit</code> para tornar permanente.</p><h3 id=desmontando-código>Desmontando Código</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> disassemble main              <span style=color:#75715e># Desmontar função main</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> disassemble /r main           <span style=color:#75715e># Mostrar opcodes também</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> disassemble _start            <span style=color:#75715e># Desmontar _start</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> disassemble 0x80484b0         <span style=color:#75715e># Desmontar endereço específico</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Desmontar um intervalo:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> disassemble main,+30          <span style=color:#75715e># 30 bytes a partir de main</span>
</span></span></code></pre></td></tr></table></div></div><p>Dois argumentos (separados por vírgula) especificam um intervalo: <code>início,fim</code> ou <code>início,+tamanho</code>.</p><h3 id=executando-o-programa>Executando o Programa</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> run                    <span style=color:#75715e># Executar sem argumentos</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> run arg1 arg2          <span style=color:#75715e># Executar com argumentos</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> start                  <span style=color:#75715e># Executar e parar no main (aprimoramento do GEF)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=listando-código-fonte>Listando Código-Fonte</h3><p><strong>Requer arquivo-fonte disponível no mesmo diretório:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> list                   <span style=color:#75715e># Mostrar linhas próximas à posição atual</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> list <span style=color:#ae81ff>1</span>                 <span style=color:#75715e># Listar da linha 1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> list main              <span style=color:#75715e># Listar a função main</span>
</span></span></code></pre></td></tr></table></div></div><div class="alert alert-warning my-4" role=alert><div class="fw-bold mb-2">Localização do Arquivo-Fonte</div><p>O GDB precisa do arquivo-fonte no mesmo caminho onde foi compilado. Se você compilou em <code>/home/user/projeto</code> mas executa o GDB de <code>/tmp</code>, use:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> directory /home/user/projeto
</span></span></code></pre></td></tr></table></div></div></div><h3 id=inspecionando-estado-do-programa>Inspecionando Estado do Programa</h3><p><strong>Informações de registradores:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info registers         <span style=color:#75715e># Mostrar todos os registradores</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info registers eax     <span style=color:#75715e># Mostrar registrador específico</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Listagem de funções:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info functions         <span style=color:#75715e># Listar todas as funções</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Arquivos-fonte:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info sources           <span style=color:#75715e># Listar todos os arquivos-fonte</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info source            <span style=color:#75715e># Mostrar arquivo-fonte atual</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Informações de variáveis:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info variables         <span style=color:#75715e># Listar variáveis globais/estáticas</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info scope Function_Name   <span style=color:#75715e># Listar variáveis locais na função</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Dump da tabela de símbolos:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> maintenance print symbols              <span style=color:#75715e># Imprimir no console</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> maintenance print symbols output.txt   <span style=color:#75715e># Imprimir em arquivo</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=trabalhando-com-breakpoints>Trabalhando com Breakpoints</h3><p><strong>Definir breakpoints:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> break main             <span style=color:#75715e># Break na função</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> break <span style=color:#ae81ff>42</span>               <span style=color:#75715e># Break na linha 42</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> break *0x080484b0      <span style=color:#75715e># Break no endereço</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Listar breakpoints:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info breakpoints       <span style=color:#75715e># Mostrar todos os breakpoints</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Habilitar/desabilitar breakpoints:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> disable <span style=color:#ae81ff>1</span>              <span style=color:#75715e># Desabilitar breakpoint #1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> enable <span style=color:#ae81ff>1</span>               <span style=color:#75715e># Habilitar breakpoint #1</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Deletar breakpoints:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> delete <span style=color:#ae81ff>1</span>               <span style=color:#75715e># Deletar breakpoint #1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> delete                 <span style=color:#75715e># Deletar todos os breakpoints</span>
</span></span></code></pre></td></tr></table></div></div><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Breakpoints Condicionais</div><p>Break apenas quando uma condição for verdadeira:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> break *0x0804844b
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> condition <span style=color:#ae81ff>1</span> $eax <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>   <span style=color:#75715e># Só para se eax for 0</span>
</span></span></code></pre></td></tr></table></div></div><p>Isso é incrivelmente poderoso para depurar loops ou condições de erro específicas.</p></div><h3 id=modificando-memória-e-registradores>Modificando Memória e Registradores</h3><p>O GDB permite modificar o estado do programa durante a execução:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set <span style=color:#f92672>{</span>char<span style=color:#f92672>}</span> 0xbffff7e6 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;B&#39;</span>              <span style=color:#75715e># Escrever byte na memória</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set <span style=color:#f92672>{</span>int<span style=color:#f92672>}</span> <span style=color:#f92672>(</span>0xbffff7e6 + 1<span style=color:#f92672>)</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>66</span>          <span style=color:#75715e># Escrever int na memória</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set var1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>                            <span style=color:#75715e># Modificar variável</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set $eax <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>                             <span style=color:#75715e># Modificar registrador</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Opcodes também podem ser modificados:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set <span style=color:#f92672>{</span>char<span style=color:#f92672>}</span> 0x080484b0 <span style=color:#f92672>=</span> 0xb8              <span style=color:#75715e># Escrever opcode</span>
</span></span></code></pre></td></tr></table></div></div><div class="alert alert-warning my-4" role=alert><div class="fw-bold mb-2">Apenas Patches Temporários</div>Mudanças feitas no GDB afetam apenas a sessão de depuração atual. Para fazer patches permanentes no binário, use ferramentas como <code>objcopy</code> ou editores hexadecimais.</div><h3 id=definindo-macros>Definindo Macros</h3><p>Crie comandos personalizados que executam automaticamente:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> define hook-stop
</span></span><span style=display:flex><span>    info registers
</span></span><span style=display:flex><span>    x/8xw $esp
</span></span><span style=display:flex><span>    disassemble $eip,+10
</span></span><span style=display:flex><span>end
</span></span></code></pre></td></tr></table></div></div><p>Isso executa após cada passo, mostrando registradores, pilha e próximas instruções. Salve em <code>~/.gdbinit</code> para usar em todas as sessões.</p><h3 id=trabalhando-com-dados>Trabalhando com Dados</h3><p><strong>Imprimir valores de registradores em diferentes formatos:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> print /d $eax          <span style=color:#75715e># Decimal</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> print /t $eax          <span style=color:#75715e># Binário</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> print /x $eax          <span style=color:#75715e># Hexadecimal</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Exemplo de saída:</strong></p><pre tabindex=0><code>(gdb) print /d $eax
$17 = 13
(gdb) print /t $eax
$18 = 1101
(gdb) print /x $eax
$19 = 0xd
</code></pre><p><strong>Examinar memória (x/nyz):</strong></p><p>Formato: <code>x/[quantidade][formato][tamanho] endereço</code></p><ul><li><strong>quantidade</strong> (n): Número de itens a exibir</li><li><strong>formato</strong> (y): <code>c</code> (char), <code>d</code> (decimal), <code>x</code> (hex), <code>s</code> (string)</li><li><strong>tamanho</strong> (z): <code>b</code> (byte), <code>h</code> (halfword/2 bytes), <code>w</code> (word/4 bytes), <code>g</code> (giant/8 bytes)</li></ul><p><strong>Exemplos:</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> x/8xw $esp             <span style=color:#75715e># Mostrar 8 words em hex do stack pointer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> x/s 0x08048000         <span style=color:#75715e># Mostrar string no endereço</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> x/20i $eip             <span style=color:#75715e># Mostrar 20 instruções no instruction pointer</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=variáveis-de-conveniência>Variáveis de Conveniência</h3><p>Crie variáveis temporárias para depuração:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set $i <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set $dyn <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>char *<span style=color:#f92672>)</span>malloc<span style=color:#f92672>(</span>10<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set $demo <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;psylinux&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> set argv<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> $demo                      <span style=color:#75715e># Modificar argumentos do programa</span>
</span></span></code></pre></td></tr></table></div></div><p>Essas variáveis existem apenas na sessão do GDB.</p><h3 id=chamando-funções>Chamando Funções</h3><p>Você pode chamar funções no programa sendo depurado:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> info functions                            <span style=color:#75715e># Listar funções disponíveis</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> call Function_1<span style=color:#f92672>(</span>args_list<span style=color:#f92672>)</span>               <span style=color:#75715e># Chamar função personalizada</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> call strlen<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;psylinux&#34;</span><span style=color:#f92672>)</span>                  <span style=color:#75715e># Chamar biblioteca padrão</span>
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>gdb<span style=color:#f92672>)</span> call strcpy<span style=color:#f92672>(</span>$dyn, argv<span style=color:#f92672>[</span>1<span style=color:#f92672>])</span>              <span style=color:#75715e># Usar variáveis de conveniência</span>
</span></span></code></pre></td></tr></table></div></div><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Útil para Testes</div>Chamar funções é ótimo para testar casos extremos sem recompilar. Por exemplo, chame <code>malloc()</code> para alocar memória, modifique-a e veja como seu programa lida com isso.</div><hr><h2 id=pontos-chave>Pontos-Chave</h2><div class="alert alert-success my-4" role=alert><div class="fw-bold mb-2">Resumo Rápido</div><ul><li><strong>Compile com <code>-ggdb</code></strong> para incluir símbolos de depuração para debugging em nível de código</li><li><strong>Use arquivos de debug separados</strong> para binários de produção para economizar espaço</li><li><strong>nm e objdump</strong> ajudam a analisar binários antes da depuração</li><li><strong>GDB permite controlar a execução</strong> com breakpoints, stepping e breaks condicionais</li><li><strong>Inspecione e modifique</strong> memória, registradores e variáveis durante runtime</li><li><strong>Breakpoints condicionais</strong> são poderosos para depurar cenários específicos</li><li><strong>Plugin GEF</strong> melhora dramaticamente a experiência do GDB com contexto visual</li></ul></div><h2 id=exercícios-práticos>Exercícios Práticos</h2><div class="alert alert-danger my-4" role=alert><div class="fw-bold mb-2">Experimente Você Mesmo</div><ol><li>Escreva um programa C simples com um bug, compile com <code>-ggdb</code>, e use GDB para encontrar o problema</li><li>Defina um breakpoint em <code>main()</code>, execute o programa e percorra linha por linha usando <code>next</code> e <code>step</code></li><li>Use <code>x/20xw $esp</code> para examinar a pilha e entender como variáveis locais são armazenadas</li><li>Crie um breakpoint condicional que só dispara quando um contador de loop atinge 100</li><li>Use <code>call</code> para invocar uma função com diferentes argumentos sem recompilar</li><li>Pratique desmontar funções com <code>disassemble</code> e correlacionar assembly com código-fonte</li></ol></div><h2 id=leitura-adicional>Leitura Adicional</h2><ul><li><a href=/blog/cheatsheet_gcc_compiling.pt/>Cheat Sheet de Compilação GCC</a> - Aprenda opções de compilação e gerenciamento de símbolos de debug</li><li><a href=/blog/howto_install_gdb_gef.pt/>Instalando GEF</a> - Turbine seu GDB com uma interface moderna</li><li><a href=/blog/article_debugging_with_strace.pt/>Depurando com strace</a> - Rastreamento de chamadas de sistema quando o código-fonte não está disponível</li><li><a href=/blog/article_linux_syscalls_in_assembly.pt/>Syscalls do Linux em Assembly</a> - Entendendo execução de programas em baixo nível</li><li><a href=https://sourceware.org/gdb/current/onlinedocs/gdb/>Manual do GDB</a> - Documentação oficial completa</li></ul><div class=mt-4><script src=https://giscus.app/client.js data-repo=psylinux/psylinux.github.io data-repo-id=R_kgDORCdA4Q data-category=Comments data-category-id=DIC_kwDORCdA4c4C1fwh data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></article></main><div class=footer><div class="mb-4 d-flex flex-row justify-content-around"><div class=mr-4><a href=/pt/articles/article_linux_syscalls_in_assembly/ data-toggle=tooltip data-placement=top title="Artigo :: Usando syscalls do Linux em Assembly"><i class="bi bi-chevron-left" style=font-size:2em></i></a></div><div class=ms-4><i class="text-secondary fas fa-chevron-right" style=font-size:2em></i></div></div><footer class="border-top border-light py-2 d-flex flex-row flex-wrap justify-content-between"><div class=copyright><small>psylinux</small></div><div><small>Copyrighted © Marcos Azevedo, 2025.</small></div></footer><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "b1b9cb012238436c9efbac840abc1907"}'></script></div></body></html>